<!DOCTYPE html>
<html>
  <head>
    <title>SquareGame</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript">

      $(document).ready(function () {
        init();
        registerEvents();
      });

      function init() {
        buildTable(<%= squareSize %>);
      }

      function registerEvents() {
        $("#board td").on('click', function () {
          cell = getCellPosition($(this));

          $("#"+cell.row+"_"+cell.col).css("background-color", "<%= player.team.color %>");

          console.log(cell);
          return false; // prevent text selection
        });
      }

      function getCellPosition($cell) {
        var cell = {
          row: $cell.data('row'),
          col: $cell.data('col')
        };

        return cell;
      }

      function buildTable(size) {
        var tableHtml = '<table class="box" cellpadding="0" cellspacing="0" id="board">';
        for (i = 0; i < size; i++) {
          tableHtml += '<tr>';
          for (j = 0; j < size; j++) {
            tableHtml += '<td id="'+ i + '_' + j +'" data-row="' + i + '" data-col="' + j + '">[' + i + ',' + j + ']</td>';
          }
          tableHtml += '</tr>';
        }
        tableHtml += '</table>';
        $('.game-wrapper').html(tableHtml);
      }

    </script>
  </head>
  <body>
    <div align="center" style="color: <%= player.team.color%>">
      <h1><%= player.name +" ("+ player.team.name %>)</h1>
    </div>
    <div class="game-wrapper"></div>
  </body>
</html>